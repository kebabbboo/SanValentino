<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Lilian â¤ï¸</title>

<style>
  * { box-sizing: border-box; }

  body {
    margin: 0;
    height: 100vh;
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #ff9a9e, #fad0c4);
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: auto;
  }

  .card {
    background: #fff;
    padding: 22px;
    border-radius: 20px;
    width: 92%;
    max-width: 390px;
    text-align: center;
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    position: relative;
   max-height: 88vh;   /* âœ… limita altezza su telefono */
  overflow: auto;     /* âœ… abilita scroll dentro la card */
  -webkit-overflow-scrolling: touch; /* âœ… scroll fluido su iPhone */
  }

  h1 { color: #ff4d6d; margin: 6px 0 10px; }
  p  { font-size: 17px; color: #333; margin: 10px 0; line-height: 1.35; }

  .buttons {
    margin-top: 18px;
    height: 120px;
    position: relative;
  }

  button {
    padding: 13px 22px;
    border: none;
    border-radius: 28px;
    font-size: 16px;
    cursor: pointer;
  }

  #yesBtn {
    background: #ff4d6d;
    color: white;
    position: absolute;
    left: 50%;
    top: 0;
    transform: translateX(-50%);
  }

  #noBtn {
    background: #e6e6e6;
    color: #555;
    position: absolute;
    left: 50%;
    top: 62px;
    transform: translateX(-50%);
    touch-action: manipulation;
  }

  .pill {
    display: inline-block;
    padding: 8px 12px;
    border-radius: 999px;
    background: #fff0f3;
    color: #b21e35;
    font-size: 14px;
    margin-top: 10px;
  }

  .hidden { display: none; }

  /* Finale */
  #final {
    margin-top: 14px;
    border-top: 1px solid #f0f0f0;
    padding-top: 14px;
  }

  .photo {
    width: 100%;
    max-height: 220px;
    object-fit: cover;
    border-radius: 16px;
    margin: 10px 0 6px;
    box-shadow: 0 8px 18px rgba(0,0,0,0.12);
  }

  .grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 10px;
    margin-top: 12px;
    text-align: left;
  }

  .panel {
    background: #fff7f9;
    border: 1px solid #ffd2dc;
    border-radius: 16px;
    padding: 12px;
  }

  .panel h3 {
    margin: 0 0 8px;
    font-size: 15px;
    color: #b21e35;
    text-align: center;
  }

  .choices {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    justify-content: center;
  }

  .choiceBtn {
    background: #ffffff;
    border: 1px solid #ffb3c1;
    color: #b21e35;
    padding: 10px 14px;
    border-radius: 999px;
    font-size: 14px;
  }

  .choiceBtn:active { transform: scale(0.98); }

  .result {
    margin-top: 8px;
    font-size: 15px;
    color: #333;
    text-align: center;
  }

  .sliderWrap {
    display: grid;
    gap: 8px;
    justify-items: center;
  }

  /* ---- MISURATORE: rosso + thumb FUOCO ---- */
  #loveRange { accent-color: #ff4d6d; } /* fallback semplice */

  #loveRange {
    -webkit-appearance: none;
    appearance: none;
    width: 100%;
    height: 8px;
    border-radius: 999px;
    background: rgba(255, 77, 109, 0.25);
    outline: none;
  }

  #loveRange::-webkit-slider-runnable-track {
    height: 8px;
    border-radius: 999px;
    background: rgba(255, 77, 109, 0.25);
  }

  #loveRange::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 34px;
    height: 34px;
    border: none;
    background: transparent;
    margin-top: -13px; /* centra il fuoco sulla barra */
    cursor: pointer;

    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='%23ff4d6d' d='M13.5 2s.5 3-1.5 5c-1.8 1.8-2.2 2.9-1.6 4.1.2.4.6.8 1.2 1.2-.1-1.5.7-2.7 2.4-3.7 0 0 4.2 4.1 4.2 8.1 0 3.5-2.8 6.3-6.3 6.3S5.7 20.2 5.7 16.7c0-3.2 2.2-5.5 4.7-7.8C12.7 6.8 13.5 2 13.5 2z'/></svg>");
    background-repeat: no-repeat;
    background-position: center;
    background-size: 28px 28px;
    filter: drop-shadow(0 6px 10px rgba(0,0,0,0.12));
  }

  #loveRange::-moz-range-track {
    height: 8px;
    border-radius: 999px;
    background: rgba(255, 77, 109, 0.25);
  }

  #loveRange::-moz-range-thumb {
    width: 34px;
    height: 34px;
    border: none;
    background-color: transparent;
    cursor: pointer;
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='%23ff4d6d' d='M13.5 2s.5 3-1.5 5c-1.8 1.8-2.2 2.9-1.6 4.1.2.4.6.8 1.2 1.2-.1-1.5.7-2.7 2.4-3.7 0 0 4.2 4.1 4.2 8.1 0 3.5-2.8 6.3-6.3 6.3S5.7 20.2 5.7 16.7c0-3.2 2.2-5.5 4.7-7.8C12.7 6.8 13.5 2 13.5 2z'/></svg>");
    background-repeat: no-repeat;
    background-position: center;
    background-size: 28px 28px;
    filter: drop-shadow(0 6px 10px rgba(0,0,0,0.12));
  }

  /* Cuori */
  .heart {
    position: fixed;
    bottom: -30px;
    animation: floatUp 4.2s linear forwards;
    pointer-events: none;
    filter: drop-shadow(0 8px 10px rgba(0,0,0,0.12));
  }

  @keyframes floatUp {
    to { transform: translateY(-110vh); opacity: 0; }
  }
</style>
</head>

<body>
  <div class="card">
    <h1>Ciao Lilian â¤ï¸</h1>

    <p>
      Domanda importantissima (e assolutamente non truccata) ğŸ˜Œ<br><br>
      Vuoi essere la mia <strong>Valentina di San Valentino?</strong> ğŸ’•
    </p>

    <div class="buttons">
      <button id="yesBtn">SÃŒ ğŸ’˜</button>
      <button id="noBtn">NO ğŸ™„</button>
    </div>

    <div id="status" class="pill hidden"></div>

    <div id="final" class="hidden">
      <h1>YEEEE â¤ï¸</h1>

      <!-- FOTO: puoi sostituire l'URL con "foto.jpg" se carichi una foto nel repo -->
      <img
        id="photo"
        class="photo"
        alt="Noi ğŸ’–"
        src="https://images.unsplash.com/photo-1529634806980-85c3dd6d34ac?auto=format&fit=crop&w=1200&q=80"
      />

      <p id="finalText">
        Lo sapevo ğŸ˜Œ<br><br>
        Preparati a una serata piena di coccole, risate e amore ğŸ’–
      </p>

      <div class="grid">
        <div class="panel">
          <h3>ğŸ¯ Scegli la tua missione</h3>
          <div class="choices">
            <button class="choiceBtn" data-choice="pizza">ğŸ• Pizza & Film</button>
            <button class="choiceBtn" data-choice="cena">ğŸ Cena Romantica</button>
            <button class="choiceBtn" data-choice="sorpresa">ğŸ Sorpresa</button>
          </div>
          <div id="choiceResult" class="result">Scegli e vediamo cosa ti aspettaâ€¦ ğŸ˜</div>
        </div>

        <div class="panel">
          <h3>ğŸ”¥ Misuratore di amore</h3>
          <div class="sliderWrap">
            <input id="loveRange" type="range" min="0" max="100" value="50" />
            <div id="loveText" class="result">Direi che siamo giÃ  ad un ottimo livello ğŸ˜Œ</div>
          </div>
        </div>

        <div class="panel">
          <h3>ğŸ˜š Timer dei baci</h3>
          <div class="choices" style="justify-content:center;">
            <button class="choiceBtn" id="kissBtn">Bacio +1 ğŸ’‹</button>
            <button class="choiceBtn" id="resetKissBtn">Reset ğŸ˜‡</button>
          </div>
          <div id="kissResult" class="result">Baci: 0</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Musica: parte SOLO dopo click su SÃŒ -->
  <audio id="music" loop>
    <source src="https://cdn.pixabay.com/audio/2022/10/30/audio_946b6b1c6d.mp3" type="audio/mpeg">
  </audio>

<script>
  const yesBtn = document.getElementById("yesBtn");
  const noBtn = document.getElementById("noBtn");
  const finalBox = document.getElementById("final");
  const status = document.getElementById("status");
  const music = document.getElementById("music");

  const choiceResult = document.getElementById("choiceResult");
  const loveRange = document.getElementById("loveRange");
  const loveText = document.getElementById("loveText");

  const kissBtn = document.getElementById("kissBtn");
  const resetKissBtn = document.getElementById("resetKissBtn");
  const kissResult = document.getElementById("kissResult");

  let noCount = 0;
  let heartsStarted = false;
  let kisses = 0;

  function vibrate(pattern) {
    try { if (navigator.vibrate) navigator.vibrate(pattern); } catch (_) {}
  }

  function showStatus(msg) {
    status.textContent = msg;
    status.classList.remove("hidden");
  }

  function moveNoButton() {
    const cardRect = document.querySelector(".card").getBoundingClientRect();
    const btnRect = noBtn.getBoundingClientRect();

    const padding = 12;
    const maxLeft = cardRect.width - btnRect.width - padding * 2;
    const maxTop = 120;

    const left = padding + Math.random() * Math.max(10, maxLeft);
    const top = 70 + Math.random() * Math.max(10, maxTop - 70);

    noBtn.style.left = left + "px";
    noBtn.style.top = top + "px";
    noBtn.style.transform = "none";
  }

  function startHearts() {
    if (heartsStarted) return;
    heartsStarted = true;

    setInterval(() => {
      const heart = document.createElement("div");
      heart.className = "heart";
      heart.textContent = ["â¤ï¸","ğŸ’–","ğŸ’•","ğŸ’—","ğŸ’˜"][Math.floor(Math.random()*5)];
      heart.style.left = (Math.random() * 100) + "vw";
      heart.style.fontSize = (Math.random() * 22 + 14) + "px";
      document.body.appendChild(heart);
      setTimeout(() => heart.remove(), 4200);
    }, 260);
  }

  function doYesFlow() {
    finalBox.classList.remove("hidden");
    showStatus("Ok. Questa Ã¨ la scelta giusta ğŸ˜ŒğŸ’˜");
    vibrate([40, 30, 40]);

    music.volume = 0.35;
    music.play().catch(() => {});

    startHearts();
    yesBtn.disabled = true;
    noBtn.disabled = true;
  }

  // SÃŒ
  yesBtn.addEventListener("click", doYesFlow);

  // NO: 5 click per arrendersi
  noBtn.addEventListener("click", () => {
    noCount++;
    vibrate(25);

    if (noCount < 5) {
      const left = 5 - noCount;
      showStatus(`No? Sei sicura? ğŸ˜ (mancano ${left})`);
      moveNoButton();

      const texts = ["NO ğŸ™„", "NO? ğŸ¤¨", "Ancora NO? ğŸ˜Œ", "Dai su ğŸ˜", "Ok basta ğŸ˜³"];
      noBtn.textContent = texts[Math.min(noCount, texts.length - 1)];
    } else {
      showStatus("Ok okâ€¦ mi arrendo. Hai vinto tu ğŸ”¥â¤ï¸");
      noBtn.textContent = "Okâ€¦ SÃŒ â¤ï¸";
      noBtn.style.background = "#ff4d6d";
      noBtn.style.color = "white";
      noBtn.style.border = "none";
      noBtn.onclick = () => doYesFlow();
      vibrate([60, 40, 60]);
    }
  });

  // Missione
  document.querySelectorAll(".choiceBtn[data-choice]").forEach(btn => {
    btn.addEventListener("click", () => {
      const c = btn.getAttribute("data-choice");
      vibrate(20);

      if (c === "pizza") {
        choiceResult.textContent = "ğŸ• Pizza, film e abbracci illimitati. (Io porto i baci.)";
      } else if (c === "cena") {
        choiceResult.textContent = "ğŸ Cena romantica + brindisi + â€˜quanto sei bellaâ€™ ripetuto N volte ğŸ˜Œ";
      } else {
        choiceResult.textContent = "ğŸ Sorpresa: tu ti fai bellaâ€¦ al resto ci penso io ğŸ˜ğŸ’˜";
      }
    });
  });

  // Slider amore
  function updateLoveText(v) {
    if (v < 20) return "Okâ€¦ timida. Ma ti recupero a colpi di coccole ğŸ˜Œ";
    if (v < 40) return "Stai iniziando a convincertiâ€¦ bravissima ğŸ˜";
    if (v < 60) return "Direi che siamo giÃ  ad un ottimo livello ğŸ˜Œ";
    if (v < 80) return "Wow. Qui siamo pericolosamente innamorati ğŸ’•";
    return "Allarme: livello amore massimo. Procedo con baci immediati ğŸ’˜";
  }

  loveRange.addEventListener("input", () => {
    loveText.textContent = updateLoveText(Number(loveRange.value));
  });

  // Timer dei baci
  function kissMessage(k) {
    if (k < 10) return `Baci: ${k} (stai scaldando lâ€™atmosfera ğŸ˜)`;
    if (k < 20) return `Baci: ${k} (ok Lilianâ€¦ qui Ã¨ serio ğŸ’˜)`;
    if (k < 30) return `Baci: ${k} (allarme: rischio coccole infinite ğŸ¥¹)`;
    return `Baci: ${k} âœ… Sbloccato: "Ti porto io via, e basta." â¤ï¸`;
  }

  kissBtn.addEventListener("click", () => {
    kisses++;
    vibrate(15);
    kissResult.textContent = kissMessage(kisses);
  });

  resetKissBtn.addEventListener("click", () => {
    kisses = 0;
    kissResult.textContent = "Baci: 0";
  });
</script>

</body>
</html>

